<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gatefall - Solo Leveling Dungeon</title>
    <link rel="icon" href="favicon.ico" type="image/svg+xml">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Login/Register Screen -->
    <div id="auth-screen" class="auth-screen">
        <div class="auth-container">
            <h1>‚öîÔ∏è Gatefall</h1>
            
            <div class="auth-tabs">
                <button id="tab-login" class="auth-tab active">Anmelden</button>
                <button id="tab-register" class="auth-tab">Registrieren</button>
            </div>

            <!-- Login Form -->
            <div id="form-login" class="auth-form active">
                <input type="email" id="login-email" placeholder="E-Mail" required>
                <input type="password" id="login-password" placeholder="Passwort" required>
                <button id="btn-login" class="auth-btn">Anmelden</button>
                <div id="login-error" class="auth-error"></div>
                
                <div class="auth-divider">
                    <span>oder</span>
                </div>
                
                <a href="/api/auth/discord" class="discord-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                    </svg>
                    Mit Discord anmelden
                </a>
            </div>

            <!-- Register Form -->
            <div id="form-register" class="auth-form">
                <input type="email" id="register-email" placeholder="E-Mail" required>
                <input type="password" id="register-password" placeholder="Passwort (min. 8 Zeichen)" required>
                <input type="text" id="register-displayname" placeholder="Anzeigename (min. 3 Zeichen)" required>
                <button id="btn-register" class="auth-btn">Registrieren</button>
                <div id="register-error" class="auth-error"></div>
                
                <div class="auth-divider">
                    <span>oder</span>
                </div>
                
                <a href="/api/auth/discord" class="discord-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
                    </svg>
                    Mit Discord registrieren
                </a>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="container" style="display: none;">
        <div class="game-header">
            <h1>‚öîÔ∏è Gatefall</h1>
            <div class="user-info">
                <span id="user-display-name">J√§ger</span>
                <button id="btn-logout" class="logout-btn">Abmelden</button>
            </div>
        </div>

        <!-- Email Verification Banner -->
        <div id="verification-banner" class="verification-banner" style="display: none;">
            <div class="banner-content">
                <div class="banner-icon">‚úâÔ∏è</div>
                <div class="banner-text">
                    <strong>E-Mail nicht best√§tigt</strong>
                    <p>Bitte best√§tige deine E-Mail-Adresse, um zu spielen.</p>
                </div>
                <button id="btn-resend-verification" class="resend-btn">Best√§tigungslink erneut senden</button>
            </div>
            <div id="resend-message" class="resend-message"></div>
        </div>
        
        <div class="main-grid">
            <!-- Left Column: Player & Enemy -->
            <div class="left-column">
                <!-- Player Panel -->
                <div class="panel player-panel">
            <h2>Spieler</h2>
            <div class="character-info">
                <div class="role-selector">
                    <label for="role-select">Rolle:</label>
                    <select id="role-select">
                        <option value="waechter">W√§chter</option>
                        <option value="assassine" selected>Assassine</option>
                        <option value="magier">Magier</option>
                        <option value="scharfschuetze">Scharfsch√ºtze</option>
                        <option value="heiler">Heiler</option>
                    </select>
                </div>
                <div class="name" id="player-name">J√§ger</div>
                <div class="stat-bar">
                    <label>LP:</label>
                    <div class="bar-container">
                        <div class="bar hp-bar" id="player-hp-bar"></div>
                    </div>
                    <span class="stat-text" id="player-hp-text">100/100</span>
                </div>
                <div class="stat-bar">
                    <label>MP:</label>
                    <div class="bar-container">
                        <div class="bar mp-bar" id="player-mp-bar"></div>
                    </div>
                    <span class="stat-text" id="player-mp-text">50/50</span>
                </div>
            </div>
        </div>

        <!-- Enemy Panel -->
        <div class="panel enemy-panel">
            <h2>Gegner</h2>
            <div class="character-info">
                <div class="dungeon-info" id="dungeon-info" style="display: none;">
                    <div class="dungeon-name" id="dungeon-name"></div>
                    <div class="dungeon-progress" id="dungeon-progress"></div>
                </div>
                <div class="name" id="enemy-name">Goblin</div>
                <div class="stat-bar">
                    <label>LP:</label>
                    <div class="bar-container">
                        <div class="bar hp-bar" id="enemy-hp-bar"></div>
                    </div>
                    <span class="stat-text" id="enemy-hp-text">80/80</span>
                </div>
            </div>
        </div>
            </div>
            
            <!-- Right Column: Skills & Dungeon Enemies -->
            <div class="right-column">
                <!-- Dungeon Enemies List -->
                <div class="panel dungeon-enemies-panel" id="dungeon-enemies-panel" style="display: none;">
                    <h2>üè∞ Dungeon Gegner</h2>
                    <p class="dungeon-hint">W√§hle einen Gegner zum Angreifen:</p>
                    <div id="dungeon-enemies-list" class="dungeon-enemies-list"></div>
                </div>

                <!-- Skills -->
                <div class="skills-panel">
                    <h3>F√§higkeiten</h3>
                    <div class="skills-container">
                        <button class="skill-button" id="skill-1">F√§higkeit 1</button>
                        <button class="skill-button" id="skill-2">F√§higkeit 2</button>
                        <button class="skill-button" id="skill-3">F√§higkeit 3</button>
                    </div>
                    <div class="interrupt-container">
                        <button class="interrupt-button" id="interrupt-btn" style="display: none;">Unterbrechen</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Control Buttons -->
        <div class="controls">
            <button class="control-button" id="start-combat">Kampf starten</button>
            <button class="control-button dungeon-button" id="start-dungeon">üè∞ Dungeon starten</button>
            <button class="control-button" id="reset">Zur√ºcksetzen</button>
            <button class="control-button glossar-button" id="glossar">Glossar</button>
        </div>

        <!-- Combat Log -->
        <div class="combat-log-panel">
            <h3>Kampfprotokoll</h3>
            <div class="combat-log" id="combat-log">
                <div class="log-entry">Bereit zum Kampf...</div>
            </div>
        </div>
    </div>

    <!-- Glossar Modal -->
    <div id="glossar-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h1>üìñ Gatefall ‚Äì Glossar</h1>
            
            <div class="glossar-section">
                <h2>üßç‚Äç‚ôÇÔ∏è Spieler & Grundlagen</h2>
                <table class="glossar-table">
                    <tr><td><strong>J√§ger</strong></td><td>Spielercharakter</td></tr>
                    <tr><td><strong>Rolle</strong></td><td>Kampfstil eines J√§gers</td></tr>
                    <tr><td><strong>Dungeon</strong></td><td>Instanzierter Kampfbereich</td></tr>
                    <tr><td><strong>Durchlauf</strong></td><td>Ein kompletter Dungeon-Run</td></tr>
                    <tr><td><strong>Kampftick</strong></td><td>Fester Kampfschritt (alle 350 ms)</td></tr>
                    <tr><td><strong>Automatischer Angriff</strong></td><td>Regelm√§√üiger Grundangriff ohne Skill</td></tr>
                    <tr><td><strong>Kampflog</strong></td><td>Textausgabe aller Kampfereignisse</td></tr>
                </table>
            </div>

            <div class="glossar-section">
                <h2>üé≠ Rollen (Spielbar)</h2>
                
                <h3>üõ° W√§chter</h3>
                <p><strong>Identit√§t:</strong> Schutz & √úberleben<br>
                <strong>Aufgabe:</strong> Schaden abfangen, Stabilit√§t sichern</p>
                
                <h3>‚öî Assassine</h3>
                <p><strong>Identit√§t:</strong> Burst & Risiko<br>
                <strong>Aufgabe:</strong> Gegner schnell ausschalten</p>
                
                <h3>üßô Magier</h3>
                <p><strong>Identit√§t:</strong> Magieschaden & Kontrolle<br>
                <strong>Aufgabe:</strong> Schaden √ºber Effekte und Ressourcen</p>
                
                <h3>üèπ Scharfsch√ºtze</h3>
                <p><strong>Identit√§t:</strong> Konstanter Schaden<br>
                <strong>Aufgabe:</strong> Dauer-DPS & Schw√§chen ausnutzen</p>
                
                <h3>‚ú® Heiler</h3>
                <p><strong>Identit√§t:</strong> Unterst√ºtzung<br>
                <strong>Aufgabe:</strong> Gruppe am Leben halten</p>
            </div>

            <div class="glossar-section">
                <h2>üìä Attribute & Werte</h2>
                <table class="glossar-table">
                    <tr><td><strong>HP (Lebenspunkte)</strong></td><td>Aktuelle Gesundheit</td></tr>
                    <tr><td><strong>Max. HP</strong></td><td>Maximale Lebenspunkte</td></tr>
                    <tr><td><strong>MP (Manapunkte)</strong></td><td>Ressource f√ºr F√§higkeiten</td></tr>
                    <tr><td><strong>Max. MP</strong></td><td>Maximale Manapunkte</td></tr>
                    <tr><td><strong>Schaden</strong></td><td>Abgezogene HP</td></tr>
                    <tr><td><strong>Kritischer Treffer</strong></td><td>Erh√∂hter Schaden</td></tr>
                    <tr><td><strong>Schadensreduktion</strong></td><td>Verringerung eingehenden Schadens</td></tr>
                    <tr><td><strong>Schild</strong></td><td>Absorbiert Schaden vor HP</td></tr>
                </table>
            </div>

            <div class="glossar-section">
                <h2>‚öîÔ∏è F√§higkeiten (Skills)</h2>
                
                <h3>W√§chter</h3>
                <ul>
                    <li><strong>Schildschlag</strong> ‚Äì verursacht Schaden</li>
                    <li><strong>Bollwerk</strong> ‚Äì reduziert erlittenen Schaden</li>
                    <li><strong>Provokation</strong> ‚Äì erzwingt Aufmerksamkeit</li>
                </ul>
                
                <h3>Assassine</h3>
                <ul>
                    <li><strong>Schattensto√ü</strong> ‚Äì hoher Schaden</li>
                    <li><strong>Hinrichten</strong> ‚Äì nur bei niedrigem Gegner-HP</li>
                    <li><strong>Blutung</strong> ‚Äì Schaden √ºber Zeit</li>
                </ul>
                
                <h3>Magier</h3>
                <ul>
                    <li><strong>Arkanschlag</strong> ‚Äì magischer Schaden</li>
                    <li><strong>Manastrom</strong> ‚Äì stellt Mana wieder her</li>
                    <li><strong>Verbrennung</strong> ‚Äì Schaden √ºber Zeit</li>
                </ul>
                
                <h3>Scharfsch√ºtze</h3>
                <ul>
                    <li><strong>Schnellschuss</strong> ‚Äì schneller Angriff</li>
                    <li><strong>Schwachstelle</strong> ‚Äì Gegner erleidet mehr Schaden</li>
                    <li><strong>Fokus</strong> ‚Äì erh√∂ht Angriffstempo</li>
                </ul>
                
                <h3>Heiler</h3>
                <ul>
                    <li><strong>Zerschmettern</strong> ‚Äì leichter Angriff</li>
                    <li><strong>Heilung</strong> ‚Äì stellt HP wieder her</li>
                    <li><strong>Schutzschild</strong> ‚Äì absorbiert Schaden</li>
                </ul>
            </div>

            <div class="glossar-section">
                <h2>üß¨ Status-Effekte & Verst√§rkungen</h2>
                <table class="glossar-table">
                    <tr><th>Begriff</th><th>Typ</th><th>Wirkung</th></tr>
                    <tr><td><strong>Blutung</strong></td><td>Debuff</td><td>Schaden pro Kampftick</td></tr>
                    <tr><td><strong>Verbrennung</strong></td><td>Debuff</td><td>Schaden pro Kampftick</td></tr>
                    <tr><td><strong>Bollwerk</strong></td><td>Buff</td><td>Schadensreduktion</td></tr>
                    <tr><td><strong>Schutzschild</strong></td><td>Buff</td><td>Absorbiert Schaden</td></tr>
                    <tr><td><strong>Schwachstelle</strong></td><td>Debuff</td><td>Ziel erleidet mehr Schaden</td></tr>
                    <tr><td><strong>Regeneration</strong></td><td>Buff</td><td>Stellt HP pro Tick wieder her</td></tr>
                </table>
            </div>

            <div class="glossar-section">
                <h2>üïí Cooldowns & Zeit</h2>
                <table class="glossar-table">
                    <tr><td><strong>Abklingzeit</strong></td><td>Zeit bis F√§higkeit erneut nutzbar ist</td></tr>
                    <tr><td><strong>Tick-Dauer</strong></td><td>Feste Zeitspanne eines Kampfticks</td></tr>
                    <tr><td><strong>Dauer (Ticks)</strong></td><td>Anzahl der Ticks eines Effekts</td></tr>
                </table>
            </div>
        </div>
    </div>
    </div>

    <!-- Awakening System Modal -->
    <div id="awakening-modal" class="awakening-modal" style="display: none;">
        <div class="awakening-overlay"></div>
        <div class="awakening-content">
            <div class="system-title">SYSTEMMELDUNG</div>
            <div class="awakening-message">Erwachen verf√ºgbar.</div>
            <button id="btn-awaken" class="awaken-btn">Erwachen</button>
        </div>
    </div>

    <!-- Status Screen Modal -->
    <div id="status-modal" class="status-modal" style="display: none;">
        <div class="status-overlay"></div>
        <div class="status-content">
            <div class="status-header">
                <div class="status-title">STATUS</div>
            </div>
            
            <div class="status-body">
                <div class="status-level-section">
                    <div class="status-level-number" id="status-level">18</div>
                    <div class="status-level-label">LEVEL</div>
                </div>
                
                <div class="status-job-section">
                    <div class="status-job-line">
                        <span class="status-job-label">JOB</span>
                        <span class="status-job-value" id="status-job">None</span>
                    </div>
                    <div class="status-title-line">
                        <span class="status-title-label">HUNTER-RANG</span>
                        <span class="status-hunter-rank" id="status-hunter-rank">D</span>
                    </div>
                </div>
                
                <div class="status-bars-section">
                    <div class="status-stat-row">
                        <div class="status-stat-icon">‚ù§Ô∏è</div>
                        <div class="status-stat-bar">
                            <div class="status-stat-fill status-hp-fill" id="status-hp-fill" style="width: 75%"></div>
                        </div>
                        <div class="status-stat-value" id="status-hp-value">2220 / 350</div>
                    </div>
                    
                    <div class="status-stat-row">
                        <div class="status-stat-icon">‚ú®</div>
                        <div class="status-stat-bar">
                            <div class="status-stat-fill status-mp-fill" id="status-mp-fill" style="width: 100%"></div>
                        </div>
                        <div class="status-stat-value" id="status-mp-value">350 / 350</div>
                    </div>
                </div>
                
                <div class="status-attributes-section">
                    <div class="status-attr-row">
                        <div class="status-attr-icon">üí™</div>
                        <div class="status-attr-label">St√§rke</div>
                        <div class="status-attr-value" id="status-str">48</div>
                    </div>
                    <div class="status-attr-row">
                        <div class="status-attr-icon">‚ù§Ô∏è</div>
                        <div class="status-attr-label">Vitalit√§t</div>
                        <div class="status-attr-value" id="status-vit">27</div>
                    </div>
                    <div class="status-attr-row">
                        <div class="status-attr-icon">‚ö°</div>
                        <div class="status-attr-label">Beweglichkeit</div>
                        <div class="status-attr-value" id="status-agi">27</div>
                    </div>
                    <div class="status-attr-row">
                        <div class="status-attr-icon">üß†</div>
                        <div class="status-attr-label">Intelligenz</div>
                        <div class="status-attr-value" id="status-int">27</div>
                    </div>
                    <div class="status-attr-row">
                        <div class="status-attr-icon">üëÅÔ∏è</div>
                        <div class="status-attr-label">Wahrnehmung</div>
                        <div class="status-attr-value" id="status-per">27</div>
                    </div>
                </div>
            </div>
            
            <div class="status-footer">
                <button id="btn-close-status" class="status-close-btn">Schlie√üen</button>
            </div>
        </div>
    </div>

    <script type="module" src="./dist/main.js?v=4"></script>
</body>
</html>
